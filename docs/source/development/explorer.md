```markdown
# Explorer Development

The `Explore` class in RETIRE provides a comprehensive set of visualization methods for analyzing coal plant data and THEMA-generated graphs. This document outlines the key components and development considerations for working with the `Explore` class.

## Class Structure

The `Explore` class is initialized with two primary objects:
- `G`: A NetworkX graph object, typically generated by THEMA
- `raw_df`: A pandas DataFrame containing the raw coal plant data

```python
class Explore:
    def __init__(self, G: nx.Graph, raw_df: pd.DataFrame):
        self.G = G
        self.raw_df = raw_df
```

## Core Visualization Methods

The `Explore` class provides several visualization methods, each designed for specific analysis tasks:

1. **Graph Visualization**
   - `drawGraph()`: Visualizes the entire graph with customizable node coloring
   - `drawComponent()`: Focuses on a specific connected component
   - `drawPathDistance()`: Shows distances from nodes to target nodes

2. **Statistical Visualization**
   - `drawHeatMap()`: Creates heatmaps of aggregated data across groups
   - `drawDotPlot()`: Visualizes feature distributions with dots sized by standard deviation

3. **Geospatial Visualization**
   - `drawMap()`: Plots coal plants on a US map with retirement information
   - `drawComponentsMap()`: Creates multiple maps faceted by component groups

4. **Flow Visualization**
   - `drawBar()`: Creates stacked bar charts showing plant counts by group
   - `drawSankey()`: Generates Sankey diagrams showing flows between groups and retirement states

## Helper Methods

The class includes several helper methods to support the main visualization functions:

- `drawGraph_helper()`: Core graph plotting logic used by both `drawGraph` and `drawComponent`
- `get_target_nodes()`: Identifies nodes based on attribute thresholds
- `get_shortest_distances_to_targets()`: Calculates path distances within the graph
- `generate_THEMAGrah_labels()`: Assigns colors to nodes based on attributes or community structure
- `assign_group_ids_to_rawdf()`: Adds group membership information to the raw data

## Development Guidelines

When extending or modifying the `Explore` class, consider the following best practices:

1. **Data Consistency**: Maintain alignment between graph node membership indices and DataFrame indices.
2. **Visualization Flexibility**: Support both interactive (Plotly) and static (Matplotlib) visualization options.
3. **Configuration Standardization**: Use consistent parameter naming and structure across methods.
4. **Performance Optimization**: For large graphs, implement efficient algorithms for path calculations and aggregations.
5. **Error Handling**: Include robust error checking for missing data or invalid graph structures.

## Example Extension

Here's an example of extending the `Explore` class with a new visualization method:

```python
def drawAttributeDistribution(self, attribute: str, by_group: bool = False):
    """
    Visualize the distribution of a specific attribute across plants,
    optionally grouped by connected component.
    
    Parameters
    ----------
    attribute : str
        The column name in raw_df to visualize
    by_group : bool, default=False
        Whether to separate distributions by group
        
    Returns
    -------
    fig : matplotlib.figure.Figure
        The created matplotlib figure
    ax : matplotlib.axes.Axes
        The created matplotlib axes
    """
    # Implementation details here
```
```
